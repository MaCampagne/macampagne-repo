/*! Sidr - v1.2.1 - 2013-11-06 MINIFIED
 * https://github.com/artberri/sidr
 * Copyright (c) 2013 Alberto Varela; Licensed MIT
 *
 *	== Custom BNE version March 20, 2014 ==
*/


!function(t){function e(e,i){var o=t("#"+e);if("function"==typeof i){var a=i(e);n.loadContent(o,a)}else if("string"==typeof i&&n.isUrl(i))t.get(i,function(t){n.loadContent(o,t)});else if("string"==typeof i){var s="",d=i.split(",");if(t.each(d,function(e,i){s+='<div class="sidr-inner">'+t(i).html()+"</div>"}),o.data("renaming")){var r=t("<div />").html(s);r.find("*").each(function(e,i){var o=t(i);n.addPrefix(o)}),s=r.html()}n.loadContent(o,s)}else null!==i&&t.error("Invalid Sidr Source")}t(function(){var e=t('<div style="width:100px;height:100px;overflow:scroll;position:absolute;top:-9999px;"/>'),i=e.get(0);e.appendTo("body"),t("html").addClass(i.offsetWidth===i.clientWidth?"hiddenscroll":"shownscroll"),e.remove()});var i=!1,o=!1,n={isUrl:function(t){var e=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return e.test(t)?!0:!1},loadContent:function(t,e){t.html(e)},addPrefix:function(t){var e=t.attr("id"),i=t.attr("class");"string"==typeof e&&""!==e&&t.attr("id",e.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-id-$1")),"string"==typeof i&&""!==i&&"sidr-inner"!==i&&t.attr("class",i.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-class-$1")),t.removeAttr("style")},execute:function(e,n,s){"function"==typeof n?(s=n,n="sidr"):n||(n="sidr");var d,r,l=t("#"+n),c=t(l.data("body")),p=t("html"),f=l.outerWidth(!0),u=l.outerHeight(!0),g=l.data("speed"),m=l.data("side"),h=l.data("displace"),v=l.data("onOpen"),y=l.data("onClose"),x="sidr"===n?"sidr-open":"sidr-open "+n+"-open";if("open"===e||"toggle"===e&&!l.is(":visible")){if(l.is(":visible")||i)return;if(o!==!1)return void a.close(o,function(){a.open(n)});i=!0,"left"===m?(d={left:f+"px"},r={left:"0px"}):"right"===m?(d={right:f+"px"},r={right:"0px"}):"top"===m?(d={top:u+"px"},r={top:"0px"}):"bottom"===m&&(d={top:"-"+u+"px"},r={bottom:"0px"}),c.is("body")&&p.addClass("flyout-lock flyout-margin"),h?c.addClass("sidr-animating").css({width:c.width(),position:"absolute"}).animate(d,g,function(){t(this).addClass(x)}):setTimeout(function(){t("body").addClass(x)},g),l.css("display","block").animate(r,g,function(){i=!1,o=n,"function"==typeof s&&s(n),c.removeClass("sidr-animating")}),v()}else{if(!l.is(":visible")||i)return;i=!0,"left"===m?(d={left:0},r={left:"-"+f+"px"}):"right"===m?(d={right:0},r={right:"-"+f+"px"}):"top"===m?(d={top:0},r={top:"-"+u+"px"}):"bottom"===m&&(d={top:0},r={bottom:"-"+u+"px"}),c.is("body")&&p.removeClass("flyout-lock flyout-margin"),c.addClass("sidr-animating").animate(d,g).removeClass(x),l.animate(r,g,function(){l.removeAttr("style").hide(),c.removeAttr("style"),t("html").removeAttr("style"),i=!1,o=!1,"function"==typeof s&&s(n),c.removeClass("sidr-animating")}),y()}}},a={open:function(t,e){n.execute("open",t,e)},close:function(t,e){n.execute("close",t,e)},toggle:function(t,e){n.execute("toggle",t,e)},reload:function(t,i){e(t,i)}};t.sidr=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"function"!=typeof e&&"string"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.sidr"):a.toggle.apply(this,arguments)},t.fn.sidr=function(i){var o=t.extend({name:"sidr",speed:300,side:"left",source:null,renaming:!0,body:"body",displace:!0,onOpen:function(){},onClose:function(){}},i),n=o.name,s=t("#"+n);return 0===s.length&&(s=t("<div />").attr("id",n).appendTo(t("body"))),s.addClass("sidr").addClass(o.side).data({speed:o.speed,side:o.side,body:o.body,displace:o.displace,renaming:o.renaming,onOpen:o.onOpen,onClose:o.onClose}),e(n,o.source),this.each(function(){var e=t(this),i=e.data("sidr");i||(e.data("sidr",n),"ontouchstart"in document.documentElement?(e.bind("touchstart",function(t){t.originalEvent.touches[0];this.touched=t.timeStamp}),e.bind("touchend",function(t){var e=Math.abs(t.timeStamp-this.touched);200>e&&(t.preventDefault(),a.toggle(n))}),e.click(function(t){t.preventDefault(),a.toggle(n)})):e.click(function(t){t.preventDefault(),a.toggle(n)}))})}}(jQuery);